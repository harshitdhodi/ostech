import{r as i,s as N,j as t,b as v}from"./index-Czi6Otcp.js";import{Q as y,B as w}from"./ReactToastify-BiIyI4B6.js";import{R as C}from"./quill.snow-Fgt9cSb4.js";import"./clsx-B-dksMZM.js";const P=()=>{const[d,u]=i.useState(""),[m,p]=i.useState(""),[a,c]=i.useState([]),[r,n]=i.useState([]),h=N(),b=o=>{const e=Array.from(o.target.files);if(a.length+e.length>5){w.error("You can only upload up to 5 photos");return}c([...a,...e]);const s=Array.from({length:e.length},()=>"");n([...r,...s])},f=o=>{c(e=>e.filter((s,l)=>l!==o)),n(e=>e.filter((s,l)=>l!==o))},x=async o=>{o.preventDefault();try{const e=new FormData;e.append("title",d),e.append("description",m),a.forEach((l,j)=>{e.append("photo",l),e.append("alt",r[j])});const s=await v.post("/api/qualitycontrol/createQualityControl",e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});u(""),p(""),c([]),n([]),h("/qualitycontrol")}catch(e){console.error(e)}},g={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}};return t.jsxs("form",{onSubmit:x,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Quality Control"}),t.jsx(y,{}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),t.jsx("input",{id:"title",value:d,onChange:o=>u(o.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Description"}),t.jsx(C,{value:m,onChange:p,modules:g,className:"quill"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photos"}),t.jsx("input",{type:"file",name:"photo",id:"photo",multiple:!0,onChange:b,className:"border rounded focus:outline-none ",accept:"image/*"}),a.length>0&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-4",children:a.map((o,e)=>t.jsxs("div",{className:"relative w-56 group flex flex-col items-center",children:[t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(o),alt:`Quality Control ${e+1}`,className:"h-32 w-56 object-cover"}),t.jsx("button",{onClick:()=>f(e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"})]}),t.jsxs("label",{className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",value:r[e],onChange:s=>{const l=[...r];l[e]=s.target.value,n(l)},className:"w-full p-2 border rounded focus:outline-none"})]})]},e))})]}),t.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded mt-8",children:"Add Quality Control"})]})};export{P as default};
