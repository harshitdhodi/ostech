import{E as se,s as oe,r as s,j as e,b as R}from"./index-Czi6Otcp.js";const re=()=>{const{categoryId:o,subCategoryId:l,subSubCategoryId:c}=se(),T=oe(),[d,g]=s.useState(""),[i,x]=s.useState(null),[m,p]=s.useState(""),[h,A]=s.useState(null),[n,u]=s.useState(""),[f,y]=s.useState(""),[j,v]=s.useState(""),[N,w]=s.useState(""),[C,S]=s.useState(""),[F,k]=s.useState(""),[$,M]=s.useState(""),[I,q]=s.useState(""),[E,O]=s.useState(),[P,D]=s.useState(),[U,L]=s.useState();s.useEffect(()=>{(async()=>{let r="";o&&l&&c?r=`/api/product/getSpecificSubSubcategory?categoryId=${o}&subCategoryId=${l}&subSubCategoryId=${c}`:o&&l?r=`/api/product/getSpecificSubcategory?categoryId=${o}&subCategoryId=${l}`:o&&(r=`/api/product/getSpecificCategory?categoryId=${o}`);try{const a=await R.get(r,{withCredentials:!0}),{category:b,photo:X,alt:Y,slug:B,metatitle:G,metadescription:J,metakeywords:Q,metalanguage:V,metacanonical:Z,metaschema:_,otherMeta:ee,changeFreq:te,priority:ae}=a.data;g(b),A(X),p(Y),u(B),y(G),v(J),w(Q),S(V),k(Z),M(_),q(ee),D(te),L(ae)}catch(a){console.error("Error fetching data:",a)}})()},[o,l,c]);const z=t=>{const r=t.target.files[0];x(r)},H=()=>{x(null),p("")},K=()=>{let t="http://localhost:3000";return o&&!l?`${t}/productcategories/${n}`:o&&l?`${t}/productsubcategories/${n}`:`${t}/productsubsubcategories/${n}`};s.useEffect(()=>{u(d)},[d]),s.useEffect(()=>{u(n.replace(/\s+/g,"-").toLowerCase())},[n]),s.useEffect(()=>{O(K())},[n,o,l]);const W=async t=>{t.preventDefault();let r="";const a=new FormData;a.append("category",d),a.append("alt",m),a.append("slug",n),a.append("metatitle",f),a.append("metakeywords",N),a.append("metadescription",j),a.append("metalanguage",C),a.append("metacanonical",F),a.append("metaschema",$),a.append("otherMeta",I),a.append("url",E),a.append("changeFreq",P),a.append("priority",U),i?a.append("photo",i):a.append("photo",h),o&&l&&c?r=`/api/product/updatesubsubcategory?categoryId=${o}&subCategoryId=${l}&subSubCategoryId=${c}`:o&&l?r=`/api/product/updateSubCategory?categoryId=${o}&subCategoryId=${l}`:o&&(r=`/api/product/updateCategory?categoryId=${o}`);try{await R.put(r,a,{withCredentials:!0}),T("/ProductCategory")}catch(b){console.error("Error updating data:",b)}};return e.jsxs("form",{onSubmit:W,className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Category"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block font-semibold mb-2",children:"Category"}),e.jsx("input",{type:"text",id:"category",value:d,onChange:t=>g(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photo"}),e.jsx("input",{type:"file",name:"photo",id:"photo",onChange:z,className:"border rounded focus:outline-none",accept:"image/*"}),(i||h)&&e.jsxs("div",{className:"mt-2 w-56 relative group",children:[e.jsx("img",{src:i?URL.createObjectURL(i):`/api/logo/download/${h}`,alt:m,className:"h-32 w-56 object-cover"}),e.jsx("button",{type:"button",onClick:H,className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"alt",className:"block font-semibold mb-2",children:"Alternative Text"}),e.jsx("input",{type:"text",id:"alt",value:m,onChange:t=>p(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]})]})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"slug",className:"block font-semibold mb-2",children:"Slug"}),e.jsx("input",{type:"text",id:"slug",value:n,onChange:t=>u(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),e.jsx("input",{type:"text",id:"url",value:E,disabled:!0,className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Title"}),e.jsx("textarea",{id:"meta",value:f,onChange:t=>y(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Description"}),e.jsx("textarea",{id:"meta",value:j,onChange:t=>v(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Keywords"}),e.jsx("textarea",{id:"meta",value:N,onChange:t=>w(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Canonical"}),e.jsx("textarea",{id:"meta",value:F,onChange:t=>k(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Language"}),e.jsx("textarea",{id:"meta",value:C,onChange:t=>S(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Other Meta"}),e.jsx("textarea",{id:"meta",value:I,onChange:t=>q(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Schema"}),e.jsx("textarea",{id:"meta",value:$,onChange:t=>M(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("input",{type:"number",id:"priority",min:0,max:1,step:.01,value:U,onChange:t=>L(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"changeFreq",className:"block font-semibold mb-2",children:"Change Frequency"}),e.jsxs("select",{id:"changeFreq",value:P,onChange:t=>D(t.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Change Frequency"}),e.jsx("option",{value:"always",children:"Always"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Update Category"})]})};export{re as default};
