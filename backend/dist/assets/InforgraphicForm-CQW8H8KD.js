import{E as v,s as I,$ as T,a0 as k,a1 as F,r as c,j as e}from"./index-DYrfXb_W.js";import{u as S}from"./index.esm-BcspotP5.js";import{R as E}from"./quill.snow-Bpog9s7S.js";const U=()=>{const{id:s}=v(),b=I(),{data:d,isLoading:x,error:f}=T(s,{skip:!s}),t=d==null?void 0:d.data,{register:r,handleSubmit:N,setValue:l,formState:{errors:o}}=S(),[j,{isLoading:n}]=k(),[y,{isLoading:m}]=F(),[g,p]=c.useState(null),[h,u]=c.useState("");c.useEffect(()=>{t&&(l("title",t.title),l("imgTitle",t.imgTitle),l("altName",t.altName),u(t.description||""),t.photo&&p(`/api/image/download/${t.photo}`))},[t,l]);const w=async a=>{const i=new FormData;i.append("title",a.title),i.append("description",h),i.append("imgTitle",a.imgTitle),i.append("altName",a.altName),a.photo[0]&&i.append("photo",a.photo[0]),s?await y({id:s,formData:i}):await j(i),b("/infographic-table")};return x?e.jsx("div",{children:"Loading existing infographic..."}):f?e.jsx("div",{children:"Error fetching infographic"}):e.jsxs("div",{className:"p-6 mx-auto bg-white border rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:s?"Edit Infographic":"Add New Infographic"}),e.jsxs("form",{onSubmit:N(w),encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",name:"title",...r("title",{required:"Title is required"}),className:"w-full p-2 border border-gray-300 rounded-lg"}),o.title&&e.jsx("p",{className:"text-red-500 text-sm",children:o.title.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 font-medium mb-2",children:"Description"}),e.jsx(E,{value:h,onChange:u,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"]]},formats:["header","bold","italic","underline","list","bullet","link","image"],className:"bg-white border border-gray-300 rounded-lg"}),o.description&&e.jsx("p",{className:"text-red-500 text-sm",children:o.description.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"photo",className:"block text-gray-700 font-medium mb-2",children:"Photo"}),e.jsx("input",{type:"file",id:"photo",name:"photo",...r("photo"),className:"w-full p-2 border border-gray-300 rounded-lg",onChange:a=>{a.target.files[0]&&p(URL.createObjectURL(a.target.files[0]))}}),g&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:g,alt:"Image Preview",className:"w-1/4 h-auto rounded-lg"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imgTitle",className:"block text-gray-700 font-medium mb-2",children:"Image Title"}),e.jsx("input",{type:"text",id:"imgTitle",name:"imgTitle",...r("imgTitle"),className:"w-1/2 p-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"altName",className:"block text-gray-700 font-medium mb-2",children:"Alt Text for Image"}),e.jsx("input",{type:"text",id:"altName",name:"altName",...r("altName"),className:"w-1/2 p-2 border border-gray-300 rounded-lg"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{type:"submit",className:`w-full p-2 rounded-lg text-white ${n||m?"bg-gray-400":"bg-blue-500"}`,disabled:n||m,children:n||m?"Submitting...":s?"Update Infographic":"Add Infographic"})})]})]})};export{U as default};
