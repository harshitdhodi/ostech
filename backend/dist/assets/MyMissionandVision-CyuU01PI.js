import{r as o,s as G,j as t,b as n}from"./index-DYrfXb_W.js";import{R as J}from"./quill.snow-Bpog9s7S.js";import{Q as K,B as W}from"./ReactToastify-BarQBDsc.js";import X from"./Vision-CI6yRBvP.js";import"./FAQ-g4VcWa9q.js";import"./clsx-B-dksMZM.js";import"./index-BEzhG2Hb.js";import"./index-CUT69iwH.js";import"./index-DyHLsshX.js";const Y=()=>{const[g,f]=o.useState(""),[v,x]=o.useState(""),[j,N]=o.useState(""),[w,y]=o.useState(""),[r,u]=o.useState([]),[C,P]=o.useState(""),[S,T]=o.useState([]),[c,h]=o.useState([]),[d,m]=o.useState([]),[p,k]=o.useState([]),[b,F]=o.useState([]);G();const A=()=>{W.success("Updated Successfully!")},D={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}},$=async()=>{try{const e=(await n.get("/api/mainMission/getMission",{withCredentials:!0})).data.data||{};N(e.title||""),y(e.description||""),T(e.photo||[]),P(e.status||"active"),m(e.alt||[]),k(e.titles||[])}catch(s){console.error("Error fetching mission data:",s)}};o.useEffect(()=>{$()},[]);const E=async s=>{s.preventDefault();const e=new FormData;e.append("title",j),e.append("description",w),e.append("status",C);const a=[...d,...c];r.forEach(l=>{e.append("photo",l)}),[...p,...b].forEach(l=>{e.append("title",l)}),a.forEach(l=>{e.append("alt",l)});try{await n.put("/api/mainMission/updateMission",e,{withCredentials:!0}),A(),u([]),h([]),await $()}catch(l){console.error("Error updating mission:",l)}},I=s=>{const e=Array.from(s.target.files);u([...r,...e])},H=(s,e)=>{const a=[...d];a[e]=s.target.value,m(a)},R=(s,e)=>{const a=[...p];a[e]=s.target.value,k(a)},U=(s,e)=>{const a=[...b];a[e]=s.target.value,F(a)},q=(s,e)=>{const a=[...c];a[e]=s.target.value,h(a)},V=(s,e)=>{s.preventDefault();const a=[...r];a.splice(e,1),u(a);const i=[...c];i.splice(e,1),h(i)},L=(s,e,a)=>{s.preventDefault(),n.delete(`/api/mainMission/image/${e}/${a}`,{withCredentials:!0}).then(i=>{const l=S.filter((Z,z)=>z!==a);T(l);const M=[...d];M.splice(a,1),m(M)}).catch(i=>{console.error(i)})},Q=async()=>{try{const s=await n.get("/api/pageHeading/heading?pageType=missionvision",{withCredentials:!0}),{heading:e,subheading:a}=s.data;f(e||""),x(a||"")}catch(s){console.error(s)}},B=async()=>{try{await n.put("/api/pageHeading/updateHeading?pageType=missionvision",{pagetype:"missionvision",heading:g,subheading:v},{withCredentials:!0}),A()}catch(s){console.error(s)}};o.useEffect(()=>{Q()},[]);const O=s=>f(s.target.value),_=s=>x(s.target.value);return t.jsxs("div",{children:[t.jsx(K,{}),t.jsxs("div",{className:"mb-8 m-4 border border-gray-200 shadow-lg p-4 rounded ",children:[t.jsxs("div",{className:"grid md:grid-cols-2 md:gap-2 grid-cols-1",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Heading"}),t.jsx("input",{type:"text",value:g,onChange:O,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Sub heading"}),t.jsx("input",{type:"text",value:v,onChange:_,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]})]}),t.jsx("button",{onClick:B,className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition  duration-300 font-serif",children:"Save"})]}),t.jsxs("form",{onSubmit:E,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Manage Mission"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),t.jsx("input",{type:"text",id:"title",value:j,onChange:s=>N(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Description"}),t.jsx(J,{value:w,onChange:y,modules:D,className:"quill"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Current Photos"}),t.jsx("div",{className:"grid grid-cols-3 gap-4",children:S.map((s,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:`/api/image/download/${s}`,alt:`Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsx("button",{onClick:a=>L(a,s,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1",children:"×"}),t.jsxs("label",{htmlFor:`alt-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-${e}`,value:d[e]||"",onChange:a=>H(a,e),className:"w-full p-2 border rounded"})]}),t.jsxs("label",{htmlFor:`title-${e}`,className:"block mt-2",children:["Image Title:",t.jsx("input",{type:"text",id:`title-${e}`,value:p[e]||"",onChange:a=>R(a,e),className:"w-full p-2 border rounded"})]})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Add New Photos"}),t.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:I,className:"mb-4"}),r.map((s,e)=>t.jsxs("div",{className:"relative w-56 mb-2",children:[t.jsx("img",{src:URL.createObjectURL(s),alt:`New Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsx("button",{onClick:a=>V(a,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1",children:"×"}),t.jsxs("label",{htmlFor:`alt-new-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-new-${e}`,value:c[e]||"",onChange:a=>q(a,e),className:"w-full p-2 border rounded"})]}),t.jsxs("label",{htmlFor:`title-new-${e}`,className:"block mt-2",children:["Image Title:",t.jsx("input",{type:"text",id:`title-new-${e}`,value:b[e]||"",onChange:a=>U(a,e),className:"w-full p-2 border rounded"})]})]},e))]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),t.jsxs("select",{id:"status",value:C,onChange:s=>P(s.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})]}),t.jsx("div",{className:"",children:t.jsx("button",{type:"submit",className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300",children:"Update Mission"})})]})]})};function ce(){return t.jsxs("div",{children:[t.jsx(Y,{}),t.jsx(X,{})]})}export{ce as default};
