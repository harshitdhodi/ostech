import{r as s,E as v,s as N,b as r,j as t}from"./index-DaCCig_H.js";const I=()=>{const[g,p]=s.useState([]),[l,o]=s.useState(""),[n,c]=s.useState(""),[i,h]=s.useState(null),[d,m]=s.useState(""),{id:u}=v(),b=N(),x=async()=>{try{const e=await r.get("/api/gallery/getCategory",{withCredentials:!0});p(e.data)}catch(e){console.error(e)}};s.useEffect(()=>{y(),x()},[]);const y=async()=>{try{const a=(await r.get(`/api/gallery/getGalleryById?id=${u}`,{withCredentials:!0})).data;c(a.alt),o(a.categories),m(`/api/gallery/download/${a.images}`)}catch(e){console.error(e)}},f=async e=>{e.preventDefault();try{const a=new FormData;a.append("categories",l),a.append("alt",n),i&&a.append("images",i);const C=await r.put(`/api/gallery/updateGallery?id=${u}`,a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});b("/gallery")}catch(a){console.error(a)}},j=e=>{h(e.target.files[0]),m(URL.createObjectURL(e.target.files[0]))};return t.jsxs("form",{onSubmit:f,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Gallery"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"categoryId",className:"block font-semibold mb-2",children:"Category"}),t.jsxs("select",{id:"categoryId",value:l,onChange:e=>o(e.target.value),className:"w-56 p-2 border rounded focus:outline-none",children:[t.jsx("option",{value:"",children:"Select Category"}),g.map(e=>t.jsx("option",{value:e._id,children:e.category},e._id))]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Current Image"}),d&&t.jsx("img",{src:d,alt:"Current",className:"w-56 h-32 object-cover"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"alt",className:"block font-semibold mb-2",children:"Alt Text"}),t.jsx("input",{type:"text",id:"alt",value:n,onChange:e=>c(e.target.value),className:"w-56 p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"image",className:"block font-semibold mb-2",children:"Upload New Image"}),t.jsx("input",{type:"file",id:"image",onChange:j,accept:"image/*",className:"w-56 p-2 border rounded focus:outline-none"})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none",children:"Save Changes"})})]})};export{I as default};
