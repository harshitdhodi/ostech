import{r as o,s as k,j as e,b as C}from"./index-Czi6Otcp.js";import{R as A}from"./quill.snow-Fgt9cSb4.js";import{Q as S,B as T}from"./ReactToastify-BiIyI4B6.js";import"./clsx-B-dksMZM.js";const q=()=>{const[u,h]=o.useState(""),[p,b]=o.useState(""),[x,f]=o.useState(""),[n,c]=o.useState([]),[i,r]=o.useState([]),[m,d]=o.useState("active"),g=k(),v={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}},j=s=>{const t=Array.from(s.target.files);if(n.length+t.length>5){T.error("You can only upload up to 5 photos");return}c([...n,...t]);const l=Array.from({length:t.length},()=>"");r([...i,...l])},N=s=>{c(t=>t.filter((l,a)=>a!==s)),r(t=>t.filter((l,a)=>a!==s))},y=async s=>{s.preventDefault();try{const t=new FormData;t.append("name",u),t.append("designation",p),t.append("testimony",x),t.append("status",m),n.forEach((a,w)=>{t.append("photo",a),t.append("alt",i[w])});const l=await C.post("/api/testimonial/insertTestinomial",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});h(""),b(""),f(""),c(null),d("active"),r([]),g("/testimonials")}catch(t){console.error(t)}};return e.jsxs("form",{onSubmit:y,className:"p-4",children:[e.jsx(S,{}),e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Testmonial"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block font-semibold mb-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",value:u,onChange:s=>h(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"designation",className:"block font-semibold mb-2",children:"Designation"}),e.jsx("input",{type:"text",id:"designation",value:p,onChange:s=>b(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"testimony",className:"block font-semibold mb-2",children:"Tesimony"}),e.jsx(A,{value:x,onChange:f,modules:v,className:"quill"})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photos"}),e.jsx("input",{type:"file",name:"photo",id:"photo",multiple:!0,onChange:j,className:"border rounded focus:outline-none ",accept:"image/*"}),n.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-4",children:n.map((s,t)=>e.jsxs("div",{className:"relative group flex flex-col items-center w-56",children:[e.jsxs("div",{className:"relative w-56",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`Testimonial ${t+1}`,className:"w-56 h-32 object-cover"}),e.jsx("button",{onClick:()=>N(t),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"})]}),e.jsxs("label",{className:"block mt-2",children:["Alternative Text:",e.jsx("input",{type:"text",value:i[t],onChange:l=>{const a=[...i];a[t]=l.target.value,r(a)},className:"w-full p-2 border rounded focus:outline-none"})]})]},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:"mr-4 text-green-500",children:[e.jsx("input",{type:"radio",value:"active",checked:m==="active",onChange:()=>d("active"),className:"mr-2"}),"Active"]}),e.jsxs("label",{className:"text-red-500",children:[e.jsx("input",{type:"radio",value:"inactive",checked:m==="inactive",onChange:()=>d("inactive"),className:"mr-2"}),"Inactive"]})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Testimonial"})]})};export{q as default};
