import{r as n,s as v,b as p,j as e}from"./index-Czi6Otcp.js";const C=()=>{const[r,i]=n.useState(""),[c,u]=n.useState(""),[a,o]=n.useState(null),[h,l]=n.useState([]),[d,b]=n.useState(1),g=v();n.useEffect(()=>{x()},[]);const x=async()=>{try{const s=(await p.get("/api/menulisting/getMenulisting",{withCredentials:!0})).data.count;if(s>0){const m=Array.from({length:s+1},(w,N)=>N+1);l(m)}else l([1])}catch(t){console.error(t),l([1])}},f=t=>{const s=t.target.files[0];o(s)},j=()=>{o(null)},y=async t=>{t.preventDefault();try{const s=new FormData;s.append("pagename",r),s.append("alt",c),s.append("photo",a),s.append("priority",d);const m=await p.post("/api/menulisting/createMenulisting",s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});i(""),u(""),o(null),g("/menulisting")}catch(s){console.error(s)}};return e.jsxs("form",{onSubmit:y,className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Menulisting"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"pagename",className:"block font-semibold mb-2",children:"Page Name"}),e.jsx("input",{type:"text",id:"pagename",value:r,onChange:t=>i(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photo"}),e.jsx("input",{type:"file",name:"photo",id:"photo",onChange:f,className:"border rounded focus:outline-none",accept:"image/*"}),a&&e.jsxs("div",{className:"mt-2 w-56 relative group",children:[e.jsx("img",{src:URL.createObjectURL(a),alt:"Menu Listing",className:"h-32 w-56 object-cover"}),e.jsx("button",{type:"button",onClick:j,className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"alt",className:"block font-semibold mb-2",children:"Alternative Text"}),e.jsx("input",{type:"text",id:"alt",value:c,onChange:t=>u(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("select",{id:"priority",className:"w-full p-2 border rounded focus:outline-none",value:d,onChange:t=>b(parseInt(t.target.value)),children:h.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Menu Listing"})]})};export{C as default};
