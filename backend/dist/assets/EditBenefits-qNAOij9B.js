import{r as a,E as R,s as q,b as u,j as t}from"./index-Vu9aRgsR.js";import{R as z}from"./quill.snow-DdLT0Kmw.js";const O=()=>{const[p,b]=a.useState(""),[f,g]=a.useState(""),[i,x]=a.useState([]),{id:d}=R(),[j,N]=a.useState([]),[c,v]=a.useState([]),[r,h]=a.useState([]),[C,L]=a.useState([]),[m,w]=a.useState([]),y=q();a.useEffect(()=>{k()},[]);const A={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}},k=async()=>{try{const e=(await u.get(`/api/benefits/getBenefitById?id=${d}`,{withCredentials:!0})).data.data;b(e.title),g(e.description),N(e.photo),h(e.alt),w(e.imgtitle||[])}catch(l){console.error(l)}},$=async l=>{l.preventDefault();try{const e=new FormData;e.append("title",p),e.append("description",f);const s=[...r,...c],o=[...m,...C];i.forEach(n=>{e.append("photo",n)}),s.forEach(n=>{e.append("alt",n)}),o.forEach(n=>{e.append("imgtitle",n)}),await u.put(`/api/benefits/updateBenefit?id=${d}`,e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),y("/benefits")}catch(e){console.error(e)}},I=l=>{const e=Array.from(l.target.files);x([...i,...e])},S=(l,e)=>{const s=[...r];s[e]=l.target.value,h(s)},T=(l,e)=>{const s=[...c];s[e]=l.target.value,v(s)},D=(l,e)=>{const s=[...m];s[e]=l.target.value,w(s)},E=(l,e,s)=>{l.preventDefault(),u.delete(`/api/benefits/${d}/image/${e}/${s}`,{withCredentials:!0}).then(o=>{const n=j.filter(F=>F!==e);N(n);const P=[...r];P.splice(s,1),h(P)}).catch(o=>{console.error(o)})},B=(l,e)=>{l.preventDefault();const s=[...i];s.splice(e,1),x(s);const o=[...c];o.splice(e,1),v(o)};return t.jsxs("form",{onSubmit:$,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Benefit"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),t.jsx("input",{type:"text",id:"title",value:p,onChange:l=>b(l.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"description",className:"block font-semibold mb-2",children:"Description"}),t.jsx(z,{value:f,onChange:g,modules:A,className:"quill"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Current Photos"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:j.map((l,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:`/api/image/download/${l}`,alt:`Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-${e}`,className:"block mt-2",children:["Alternative Text :",t.jsx("input",{type:"text",id:`alt-${e}`,value:r[e],onChange:s=>S(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsxs("label",{htmlFor:`imgtitle-${e}`,className:"block mt-2",children:["Title Text :",t.jsx("input",{type:"text",id:`imgtitle-${e}`,value:m[e],onChange:s=>D(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:s=>E(s,l,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Add New Photos"}),t.jsx("input",{type:"file",onChange:I,multiple:!0,accept:"image/*",className:"p-2 border rounded"}),t.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:i.map((l,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(l),alt:`New Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-new-${e}`,className:"block mt-2",children:["Alternative Text :",t.jsx("input",{type:"text",id:`alt-new-${e}`,value:c[e]||"",onChange:s=>T(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:s=>B(s,e),className:`absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex\r
                justify-center items-center`,children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none",children:"Save Changes"})})]})};export{O as default};
