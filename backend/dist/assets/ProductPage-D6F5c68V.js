import{r as t,s as R,b as M,j as s,L as z}from"./index-DYrfXb_W.js";import{C as B,a as L,b as E,c as G}from"./Card-BNyqlNnD.js";import{B as g,C as U,a as V,b as q}from"./Collapsible-Dwskv60D.js";import{C as J}from"./chevron-down-pFdZMq4E.js";import{B as K}from"./Banner-BQ1jNq8A.js";import{F as Q}from"./Footer-Dfz7YUra.js";import"./clsx-B-dksMZM.js";import"./phone-D3SQevJa.js";const u=()=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-full w-full bg-gray-200 rounded"})});function W(){const[d,v]=t.useState(""),[l,j]=t.useState("All"),[i,f]=t.useState([]),[m,h]=t.useState([]),[y,C]=t.useState(1),[D,I]=t.useState(null),[x,k]=t.useState(!0),w=6,P=R(),A=t.useCallback(async()=>{try{const r=(await M.get("/api/product/getAllProducts")).data.data.reduce((o,c)=>{const N=c.categoryName||"Uncategorized";return o[N]||(o[N]={id:c.categories[0],products:[]}),o[N].products.push(c),o},{}),H=Object.entries(r).map(([o,c])=>({name:o,id:c.id,products:c.products})).sort((o,c)=>o.name.toLowerCase()==="case packer"?-1:c.name.toLowerCase()==="case packer"?1:o.name.localeCompare(c.name));f(H)}catch(e){console.error("Error fetching product categories:",e)}},[]),S=t.useCallback(async()=>{k(!0);try{const e=l==="All"?"/api/product/getAllProductsByPriority":`/api/product/getProductsByCategories?categoryIds=${l}`,r=await(await fetch(e)).json(),n=Array.isArray(r)?r:r.data?r.data:[];h(n),C(1)}catch(e){console.error("Error fetching products:",e)}finally{k(!1)}},[l]);t.useEffect(()=>{A()},[A]),t.useEffect(()=>{S()},[S]);const p=t.useMemo(()=>m.filter(e=>{const a=l==="All"||e.categoryId===l||Array.isArray(e.categories),r=e.title.toLowerCase().includes(d.toLowerCase()),n=e.isVisible!==!1;return a&&r&&n}),[m,l,d]),$=t.useMemo(()=>{const e=y*w,a=e-w;return p.slice(a,e)},[p,y]),_=Math.ceil(p.length/w),T=t.useCallback((e,a)=>{P(`/${a}`)},[P]),F=t.useCallback(e=>{C(e),window.scrollTo({top:0,behavior:"smooth"})},[]),b=t.useCallback(e=>{j(e)},[]),O=t.useCallback(e=>{I(e)},[]);return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-col gap-2 overflow-x-auto md:hidden bg-[#1290ca]/20 p-4 rounded-lg",children:[s.jsx(g,{onClick:()=>b("All"),variant:l==="All"?"default":"outline",className:"flex-shrink-0 bg-white",children:"All"}),i.map(e=>s.jsx(g,{onClick:()=>b(e._id),variant:l===e._id?"default":"outline",className:"flex-shrink-0 bg-white text-black",children:e.category||e.name},e._id||e.name))]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("aside",{className:"hidden scrollbar-hide overflow-auto md:block xl:w-[20%] w-full md:w-1/4 bg-[#0d233f] p-5 rounded-none sticky top-[10%] h-screen",children:[s.jsx("h2",{className:"text-2xl font-bold text-[#ffffff] text-center mb-4",children:"Product Categories"}),s.jsx("div",{className:"space-y-3 mt-10",children:s.jsxs("div",{className:"flex flex-col justify-center",children:[s.jsx(g,{onClick:()=>b("All"),variant:l==="All"?"default":"outline",className:"flex-shrink-0 bg-white mb-2 text-left",children:"All Categories"}),x?Array(5).fill(0).map((e,a)=>s.jsx("div",{className:"my-3",children:s.jsx(u,{className:"h-12 w-full bg-gray-200"})},a)):i.length>0?i.map(e=>s.jsxs(U,{children:[s.jsxs(V,{className:"flex my-3 items-center justify-between w-full font-medium text-left text-gray-700 bg-white text-[16px] hover:bg-gray-100 rounded-md cursor-pointer shadow hover:shadow-lg hover:translate-y-[-3px] transform transition-all duration-300 shadow-[#0b0f14] hover:shadow-[#3a4b5f]",children:[s.jsx("div",{className:"flex-grow cursor-pointer",onClick:()=>b(e.id),children:e.category||e.name}),s.jsx("div",{className:"",children:s.jsx(J,{className:"h-6 w-4 mr-2"})})]}),s.jsx(q,{className:"mt-2 space-y-2",children:(e.products||[]).map(a=>s.jsx(z,{to:`/${a.slug}`,onClick:()=>O(a._id),children:s.jsx(g,{variant:"ghost",className:`w-full shadow hover:shadow-lg hover:translate-y-[-3px] transform transition-all duration-300 
                  shadow-[#0b0f14] hover:shadow-[#3a4b5f] justify-start text-[13px] hover:bg-white bg-gray-200 m-1 pl-4 
                  ${D===a._id?"bg-white":""}`,children:a.title})},a._id))})]},e._id||e.name)):s.jsx("p",{className:"text-white text-center",children:"No categories available"})]})})]}),s.jsxs("main",{className:"flex-1 overflow-auto",children:[s.jsx("div",{className:"grid grid-cols-1 xl:m-3 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-8",children:x?Array(6).fill(0).map((e,a)=>s.jsxs(B,{className:"mx-4",children:[s.jsx(L,{className:"p-0",children:s.jsx(u,{className:"aspect-[4/3] w-full"})}),s.jsxs(E,{className:"px-4 py-4",children:[s.jsx(u,{className:"h-6 w-3/4 mb-2"}),s.jsx(u,{className:"h-4 w-1/2 mb-2"}),s.jsx(u,{className:"h-20 w-full"})]})]},a)):$.map(e=>{var a;return s.jsxs(B,{className:"mx-4 flex flex-col transition-shadow duration-300 hover:shadow-lg hover:shadow-[#1290ca] shadow-[#1290ca]/20",children:[s.jsx(L,{className:"p-0",children:s.jsx("div",{onClick:()=>{var r;return T((r=i.find(n=>n._id===e.categories[0]))==null?void 0:r.category,e.slug)},className:"cursor-pointer aspect-[4/3] relative overflow-hidden",children:s.jsx("img",{src:`/api/image/download/${e.photo[0]||"default-image.jpg"}`,alt:e.title,className:"w-full h-full object-fill hover:scale-105 transition-transform duration-300"})})}),s.jsxs(E,{onClick:()=>{var r;return T((r=i.find(n=>n._id===e.categories[0]))==null?void 0:r.category,e.slug)},className:"flex-1 p-4 py-6 cursor-pointer",children:[s.jsx(G,{className:"text-lg sm:text-xl mb-2 line-clamp-2 hover:text-[#1290ca]",children:e.title}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:(a=i.find(r=>r._id===e.categories[0]))==null?void 0:a.category}),s.jsx("div",{className:"text-gray-600 text-sm line-clamp-3",dangerouslySetInnerHTML:{__html:e.homeDetail}})]})]},e._id)})}),!x&&p.length===0&&s.jsx("p",{className:"text-center text-gray-500 mt-8",role:"alert",children:"No products found. Try a different search term or category."}),_>1&&!x&&s.jsx("div",{className:"flex justify-center gap-2 mt-8",children:Array.from({length:_},(e,a)=>s.jsx(g,{onClick:()=>F(a+1),className:`px-4 my-3 py-2 rounded-md text-sm transition-colors duration-300 ${y===a+1?"bg-[#1d84b4] text-black border border-[#0f3242]":"bg-black text-[#0f3242] hover:bg-[#f0f4f8] hover:text-[#1290ca] border border-[#d1d5db]"}`,children:a+1},a+1))})]})]})]})}const le=()=>{const[d,v]=t.useState({backgroundImage:"",title:"",imgTitle:""}),[l,j]=t.useState(null);return t.useEffect(()=>{(async()=>{try{const m=(await M.get("/api/banner/getBannersBySection?section=Products")).data.banners;if(m&&m.length>0){const h=m[0];v({backgroundImage:`/api/image/download/${h.photo[0]}`,title:h.title,imgTitle:h.imgTitle})}}catch(f){console.error("Error fetching banner data:",f)}})()},[]),s.jsxs("div",{className:"pt-[4%]",children:[s.jsx(K,{backgroundImage:d.backgroundImage,title:d.title,imgTitle:d.imgTitle}),s.jsx(W,{filterParams:l,setFilterParams:j}),s.jsx(Q,{})]})};export{le as default};
