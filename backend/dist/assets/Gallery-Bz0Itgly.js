import{r,s as D,j as e,L as p,x as L,y as R,b as t,z as U,C as x,D as $}from"./index-Vu9aRgsR.js";import{r as m,U as z,l as I}from"./index-BCyGfQK3.js";import{Q as M,B as _}from"./ReactToastify-D4xlGJRd.js";import"./clsx-B-dksMZM.js";const J=()=>{const[i,d]=r.useState(""),[c,g]=r.useState(""),[l,b]=r.useState([]),[y,u]=r.useState(!0),[n,f]=r.useState(""),j=D(),N=r.useMemo(()=>l.filter(a=>a.alt.toLowerCase().includes(n.toLowerCase())),[l,n]),v=()=>{_.success("Updated Successfully!")},w=r.useMemo(()=>[{Header:"ID",accessor:"id"},{Header:"Category",accessor:"categoryName",Cell:({row:a})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>j(`/gallery/editGallery/${a.original._id}`),children:a.original.categoryName})},{Header:"Images",accessor:"images",Cell:({value:a})=>e.jsx("img",{src:`/api/gallery/download/${a}`,alt:"Gallery",className:"h-20 w-32 object-cover"}),disableSortBy:!0},{Header:"Options",Cell:({row:a})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(p,{to:`/gallery/editGallery/${a.original._id}`,children:e.jsx(L,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>P(a.original._id),children:e.jsx(R,{})})]}),disableSortBy:!0}],[]),{getTableProps:C,getTableBodyProps:S,headerGroups:H,rows:G,prepareRow:T}=m.useTable({columns:w,data:N},m.useSortBy),h=async()=>{u(!0);try{const s=(await t.get("/api/gallery/getGallery",{withCredentials:!0})).data.map((o,A)=>({...o,id:A+1}));b(s)}catch(a){console.error(a)}finally{u(!1)}},P=async a=>{try{const s=await t.delete(`/api/gallery/deleteGallery?id=${a}`,{withCredentials:!0});h()}catch(s){console.error(s)}};r.useEffect(()=>{h()},[]);const B=async()=>{try{const a=await t.get("/api/pageHeading/heading?pageType=gallery",{withCredentials:!0}),{heading:s,subheading:o}=a.data;d(s||""),g(o||"")}catch(a){console.error(a)}},k=async()=>{try{await t.put("/api/pageHeading/updateHeading?pageType=gallery",{pagetype:"gallery",heading:i,subheading:c},{withCredentials:!0}),v()}catch(a){console.error(a)}};r.useEffect(()=>{B()},[]);const E=a=>d(a.target.value),F=a=>g(a.target.value);return e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx(M,{}),e.jsxs("div",{className:"mb-8 border border-gray-200 shadow-lg p-4 rounded ",children:[e.jsxs("div",{className:"grid md:grid-cols-2 md:gap-2 grid-cols-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Heading"}),e.jsx("input",{type:"text",value:i,onChange:E,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Sub heading"}),e.jsx("input",{type:"text",value:c,onChange:F,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:"Save"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase",children:"Gallery"}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:e.jsx(p,{to:"/gallery/createGallery",children:e.jsx(U,{size:15})})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by alt...",value:n,onChange:a=>f(a.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage Gallery"}),y?e.jsx("div",{className:"flex justify-center",children:e.jsx(z,{animation:I,size:56})}):e.jsx(e.Fragment,{children:l.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse",...C(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:H.map(a=>e.jsx("tr",{...a.getHeaderGroupProps(),children:a.headers.map(s=>e.jsx("th",{...s.getHeaderProps(s.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif ",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"",children:s.render("Header")}),s.canSort&&e.jsx("span",{className:"ml-1",children:s.isSorted?s.isSortedDesc?e.jsx(x,{}):e.jsx($,{}):e.jsx(x,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...S(),children:G.map(a=>(T(a),e.jsx("tr",{...a.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150",children:a.cells.map(s=>e.jsx("td",{...s.getCellProps(),className:"py-2 px-4 ",children:s.render("Cell")}))})))})]})})]})};export{J as default};
