import{r as a,s as H,b as N,j as e,L as z}from"./index-Vu9aRgsR.js";import{C as I,a as E,b as M,c as G}from"./Card-BiS0s_Vb.js";import{C as U,a as V,b as q,B as f}from"./Collapsible-DoNApYPU.js";import{C as J}from"./chevron-down-Dcvm_ySH.js";import{B as K}from"./Banner-Bdw7R4Yi.js";import{F as Q}from"./Footer-D4eH7S0l.js";import"./clsx-B-dksMZM.js";import"./phone-xR8Z9Uju.js";const h=()=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-full w-full bg-gray-200 rounded"})});function W(){const[i,v]=a.useState(""),[o,p]=a.useState("All"),[c,g]=a.useState([]),[d,m]=a.useState([]),[b,C]=a.useState(1),[D,L]=a.useState(null),[x,P]=a.useState(!0),j=6,k=H(),S=a.useCallback(async()=>{try{const r=(await N.get("/api/product/getAllProducts")).data.data.reduce((l,n)=>{var _;const y=n.categoryName||"Uncategorized",R=((_=n.categories[0])==null?void 0:_._id)||n.categories[0];return l[y]||(l[y]={id:R,products:[]}),l[y].products.push(n),l},{});g(Object.entries(r).map(([l,n])=>({name:l,id:n.id,products:n.products})))}catch(s){console.error("Error fetching product categories:",s)}},[]),A=a.useCallback(async()=>{P(!0);try{const s=o==="All"?"/api/product/getAllProductsByPriority":`/api/product/getProductsByCategories?categoryIds=${o}`,r=(await N.get(s)).data;console.log("API Response:",r);const l=Array.isArray(r)?r:r.data||[];m(l),C(1)}catch(s){console.error("Error fetching products:",s)}finally{P(!1)}},[o]);a.useEffect(()=>{S()},[S]),a.useEffect(()=>{A()},[A]);const u=a.useMemo(()=>d.filter(s=>{const t=o==="All"||s.categoryId===o||Array.isArray(s.categories)&&s.categories.includes(o),r=s.title.toLowerCase().includes(i.toLowerCase()),l=s.isVisible!==!1;return t&&r&&l}),[d,o,i]),$=a.useMemo(()=>{const s=b*j,t=s-j;return u.slice(t,s)},[u,b]),T=Math.ceil(u.length/j),B=a.useCallback((s,t)=>{k(`/${t}`)},[k]),F=a.useCallback(s=>{C(s),window.scrollTo({top:0,behavior:"smooth"})},[]),w=a.useCallback(s=>{p(s),window.scrollTo({top:0,behavior:"smooth"})},[]),O=a.useCallback(s=>{L(s)},[]);return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("aside",{className:"hidden scrollbar-hide overflow-auto md:block xl:w-[20%] w-full md:w-1/4 bg-[#0d233f] p-5 rounded-none sticky top-[10%] h-screen",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#ffffff] text-center mb-4",children:"Product Categories"}),e.jsx("div",{className:"space-y-3 mt-10",children:e.jsx("div",{className:"flex flex-col justify-center",children:x?Array(5).fill(0).map((s,t)=>e.jsx("div",{className:"my-3",children:e.jsx(h,{className:"h-12 w-full bg-gray-200"})},t)):c.length>0?c.map(s=>e.jsxs(U,{children:[e.jsxs(V,{className:"flex my-3 items-center justify-between w-full font-medium text-left text-gray-700 bg-white text-[16px] hover:bg-gray-100 rounded-md cursor-pointer shadow hover:shadow-lg hover:translate-y-[-3px] transform transition-all duration-300 shadow-[#0b0f14] hover:shadow-[#3a4b5f]",children:[e.jsx("div",{className:"flex-grow cursor-pointer",onClick:()=>w(s.id),children:s.name}),e.jsx("div",{className:"",children:e.jsx(J,{className:"h-6 w-4 mr-2"})})]}),e.jsx(q,{className:"mt-2 space-y-2",children:(s.products||[]).map(t=>e.jsx(z,{to:`/${t.slug}`,onClick:()=>O(t._id),children:e.jsx(f,{variant:"ghost",className:`w-full shadow hover:shadow-lg hover:translate-y-[-3px] transform transition-all duration-300 
                              shadow-[#0b0f14] hover:shadow-[#3a4b5f] justify-start text-[13px] hover:bg-white bg-gray-200 m-1 pl-4 
                              ${D===t._id?"bg-white":""}`,children:t.title})},t._id))})]},s.id)):e.jsx("p",{className:"text-white text-center",children:"No categories available"})})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"grid grid-cols-1 xl:m-3 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-8",children:x?Array(6).fill(0).map((s,t)=>e.jsxs(I,{className:"mx-4",children:[e.jsx(E,{className:"p-0",children:e.jsx(h,{className:"aspect-[4/3] w-full"})}),e.jsxs(M,{className:"px-4 py-4",children:[e.jsx(h,{className:"h-6 w-3/4 mb-2"}),e.jsx(h,{className:"h-4 w-1/2 mb-2"}),e.jsx(h,{className:"h-20 w-full"})]})]},t)):$.map(s=>{var t;return e.jsxs(I,{className:"mx-4 flex flex-col transition-shadow duration-300 hover:shadow-lg hover:shadow-[#1290ca] shadow-[#1290ca]/20",children:[e.jsx(E,{className:"p-0",children:e.jsx("div",{onClick:()=>{var r;return B((r=c.find(l=>l.id===s.categories[0]))==null?void 0:r.name,s.slug)},className:"cursor-pointer aspect-[4/3] relative overflow-hidden",children:e.jsx("img",{src:`/api/image/download/${s.photo[0]||"default-image.jpg"}`,alt:s.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})})}),e.jsxs(M,{onClick:()=>{var r;return B((r=c.find(l=>l.id===s.categories[0]))==null?void 0:r.name,s.slug)},className:"flex-1 p-4 py-6 cursor-pointer",children:[e.jsx(G,{className:"text-lg sm:text-xl mb-2 line-clamp-2 hover:text-[#1290ca]",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:(t=c.find(r=>r.id===s.categories[0]))==null?void 0:t.name}),e.jsx("div",{className:"text-gray-600 text-sm line-clamp-3",dangerouslySetInnerHTML:{__html:s.homeDetail}})]})]},s._id)})}),!x&&u.length===0&&e.jsx("p",{className:"text-center text-gray-500 mt-8",role:"alert",children:"No products found. Try a different search term or category."}),T>1&&!x&&e.jsx("div",{className:"flex justify-center gap-2 mt-8",children:Array.from({length:T},(s,t)=>e.jsx(f,{onClick:()=>F(t+1),className:`px-4 my-3 py-2 rounded-md text-sm transition-colors duration-300 ${b===t+1?"bg-[#1d84b4] text-black border border-[#0f3242]":"bg-black text-[#0f3242] hover:bg-[#f0f4f8] hover:text-[#1290ca] border border-[#d1d5db]"}`,children:t+1},t+1))}),e.jsxs("div",{className:"flex flex-col gap-2 overflow-x-auto md:hidden bg-[#1290ca]/20 p-4 rounded-lg mt-8",children:[e.jsx("h2",{className:"text-lg font-bold text-center mb-2",children:"Categories"}),e.jsx(f,{onClick:()=>w("All"),variant:o==="All"?"default":"outline",className:"flex-shrink-0 bg-white",children:"All"}),c.map(s=>e.jsx(f,{onClick:()=>w(s.id),variant:o===s.id?"default":"outline",className:"flex-shrink-0 bg-white text-black",children:s.name},s.id))]})]})]})})}const le=()=>{const[i,v]=a.useState({backgroundImage:"",title:"",imgTitle:""}),[o,p]=a.useState(null);return a.useEffect(()=>{(async()=>{try{const d=(await N.get("/api/banner/getBannersBySection?section=Products")).data.banners;if(d&&d.length>0){const m=d[0];v({backgroundImage:`/api/image/download/${m.photo[0]}`,title:m.title,imgTitle:m.imgTitle})}}catch(g){console.error("Error fetching banner data:",g)}})()},[]),e.jsxs("div",{className:"pt-[4%]",children:[e.jsx(K,{backgroundImage:i.backgroundImage,title:i.title,imgTitle:i.imgTitle}),e.jsx(W,{filterParams:o,setFilterParams:p}),e.jsx(Q,{})]})};export{le as default};
