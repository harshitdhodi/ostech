import{r as t,s as v,j as e,L as n,x as w,y as P,b as c,z as S,C as d,D as G}from"./index-Czi6Otcp.js";import{r as g,U as I,l as T}from"./index-DPJpQ9gQ.js";const H=()=>{const[o,x]=t.useState([]),[p,l]=t.useState(!0),h=v(),m=t.useMemo(()=>[{Header:"ID",accessor:"autoIncrementId"},{Header:"Category",accessor:"category",Cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2 hover:text-blue-500 cursor-pointer",onClick:()=>h(`/GalleryCategory/editGalleryCategory/${s.original._id}`),children:[s.original.photo&&e.jsx("img",{src:`/api/logo/download/${s.original.photo}`,alt:s.original.alt,className:"w-6 h-6"}),s.original.category]})},{Header:"Options",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(n,{to:`/GalleryCategory/editGalleryCategory/${s.original._id}`,children:e.jsx(w,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>C({id:s.original._id}),children:e.jsx(P,{})})]}),disableSortBy:!0}],[]),{getTableProps:y,getTableBodyProps:j,headerGroups:u,rows:b,prepareRow:f}=g.useTable({columns:m,data:o},g.useSortBy),i=async()=>{l(!0);try{const a=(await c.get("/api/gallery/getCategory",{withCredentials:!0})).data.map((r,N)=>({...r,autoIncrementId:N+1}));x(a)}catch(s){console.error(s)}finally{l(!1)}},C=async({id:s})=>{const a=`/api/gallery/deleteCategory?id=${s}`;try{await c.delete(a,{withCredentials:!0}),i()}catch(r){console.error(r)}};return t.useEffect(()=>{i()},[]),e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold  text-gray-700 font-serif uppercase",children:"Categories"}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300",children:e.jsx(n,{to:"/GalleryCategory/CreateGalleryCategory",children:e.jsx(S,{size:15})})})]}),p?e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{animation:T,size:56})}):e.jsx(e.Fragment,{children:o.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse",...y(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:u.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(a=>e.jsx("th",{...a.getHeaderProps(a.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif",children:e.jsxs("div",{className:"flex items-center gap-2 ",children:[e.jsx("span",{children:a.render("Header")}),a.canSort&&e.jsx("span",{className:"ml-1",children:a.isSorted?a.isSortedDesc?e.jsx(d,{}):e.jsx(G,{}):e.jsx(d,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...j(),children:b.map(s=>(f(s),e.jsx("tr",{...s.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150 ",children:s.cells.map(a=>e.jsx("td",{...a.getCellProps(),className:"py-2 px-4 ",children:a.render("Cell")}))})))})]})})]})};export{H as default};
