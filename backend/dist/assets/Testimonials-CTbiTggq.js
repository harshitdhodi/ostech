import{r as a,s as J,j as e,t as K,v as C,w as X,L as w,x as Y,y as Z,b as l,z as ee,C as T,D as se}from"./index-DaCCig_H.js";import{r as S,U as te,l as ae}from"./index-DxZpshAk.js";import{Q as re,B as ie}from"./ReactToastify-DyB85pLu.js";import{M as H}from"./index-CcvoQcxc.js";import{R as ne}from"./quill.snow-nU8y5b26.js";import"./clsx-B-dksMZM.js";import"./index-BRFtJW8t.js";H.setAppElement("#root");const ue=()=>{const[h,u]=a.useState(""),[g,p]=a.useState(""),[d,k]=a.useState([]),[P,b]=a.useState(!0),[r,i]=a.useState(0),[n,B]=a.useState(0),[c,F]=a.useState(""),[o,j]=a.useState(null),[M,f]=a.useState(!1),y=5,N=J(),A=a.useMemo(()=>d.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())),[d,c]),D=()=>{ie.success("Updated Successfully!")},E=a.useMemo(()=>[{Header:"ID",accessor:"id"},{Header:"Name",accessor:"name",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>N(`/testimonials/editTestimonials/${s.original._id}`),children:s.original.name})},{Header:"Designation",accessor:"designation",Cell:({row:s})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>N(`/testimonials/editTestimonials/${s.original._id}`),children:s.original.designation})},{Header:"Photo",accessor:"photo",Cell:({value:s})=>{const t=Array.isArray(s)&&s.length>0?s[0]:null;return t?e.jsx("img",{src:`/api/image/download/${t}`,alt:"Testimonial",className:"w-32 h-20 object-cover"}):null},disableSortBy:!0},{Header:"Status",accessor:"status",Cell:({value:s})=>s==="active"?e.jsx(K,{className:"text-green-500"}):e.jsx(C,{className:"text-red-500"}),disableSortBy:!0},{Header:"Options",Cell:({row:s})=>e.jsxs("div",{className:"flex  gap-4",children:[e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition",onClick:()=>O(s.original),children:e.jsx(X,{})}),e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsxs(w,{to:`/testimonials/editTestimonials/${s.original._id}`,children:["  ",e.jsx(Y,{})]})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>U(s.original._id),children:e.jsx(Z,{})})]}),disableSortBy:!0}],[]),{getTableProps:R,getTableBodyProps:L,headerGroups:$,rows:z,prepareRow:I}=S.useTable({columns:E,data:A},S.useSortBy),O=s=>{j(s),f(!0)},m=()=>{f(!1),j(null)},v=async s=>{b(!0);try{const t=await l.get(`/api/testimonial/getTestimonial?page=${s+1}`,{withCredentials:!0}),x=t.data.data.map((V,W)=>({...V,id:s*y+W+1}));k(x),B(Math.ceil(t.data.total/y))}catch(t){console.error(t)}finally{b(!1)}},U=async s=>{try{const t=await l.delete(`/api/testimonial/deleteTestimonial?id=${s}`,{withCredentials:!0});v(r)}catch(t){console.error(t)}};a.useEffect(()=>{v(r)},[r]);const _=async()=>{try{const s=await l.get("/api/pageHeading/heading?pageType=testimonial",{withCredentials:!0}),{heading:t,subheading:x}=s.data;u(t||""),p(x||"")}catch(s){console.error(s)}},q=async()=>{try{await l.put("/api/pageHeading/updateHeading?pageType=testimonial",{pagetype:"testimonial",heading:h,subheading:g},{withCredentials:!0}),D()}catch(s){console.error(s)}};a.useEffect(()=>{_()},[]);const Q=s=>u(s.target.value),G=s=>p(s.target.value);return e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx(re,{}),e.jsxs("div",{className:"mb-8 border border-gray-200 shadow-lg p-4 rounded ",children:[e.jsxs("div",{className:"grid md:grid-cols-2 md:gap-2 grid-cols-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Heading"}),e.jsx("input",{type:"text",value:h,onChange:Q,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 font-serif uppercase",children:"Sub heading"}),e.jsx("input",{type:"text",value:g,onChange:G,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]})]}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:"Save"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase",children:"Testimonials"}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:e.jsx(w,{to:"/testimonials/createTestimonials",children:e.jsx(ee,{size:15})})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by name...",value:c,onChange:s=>F(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage Testimonials"}),P?e.jsx("div",{className:"flex justify-center",children:e.jsx(te,{animation:ae,size:56})}):e.jsx(e.Fragment,{children:d.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse overflow-x-auto",...R(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:$.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(t=>e.jsx("th",{...t.getHeaderProps(t.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif",children:e.jsxs("div",{className:"flex items-center  gap-2 ",children:[e.jsx("span",{children:t.render("Header")}),t.canSort&&e.jsx("span",{className:"ml-1",children:t.isSorted?t.isSortedDesc?e.jsx(T,{}):e.jsx(se,{}):e.jsx(T,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...L(),children:z.map(s=>(I(s),e.jsx("tr",{...s.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150  ",children:s.cells.map(t=>e.jsx("td",{...t.getCellProps(),className:"py-2 px-4 ",children:t.render("Cell")}))})))})]})}),e.jsxs("div",{className:"mt-4 flex justify-center",children:[e.jsx("button",{onClick:()=>i(0),disabled:r===0,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:"<<"})," ",e.jsx("button",{onClick:()=>i(r-1),disabled:r===0,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:"<"})," ",e.jsx("button",{onClick:()=>i(r+1),disabled:r+1>=n,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:">"})," ",e.jsx("button",{onClick:()=>i(n-1),disabled:r+1>=n,className:"mr-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400 transition",children:">>"})," ",e.jsxs("span",{children:["Page"," ",e.jsxs("strong",{children:[r+1," of ",n]})," "]})]}),e.jsx(H,{isOpen:M,onRequestClose:m,contentLabel:"Banner Details",className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow-lg w-96 relative",children:[e.jsx("button",{onClick:m,className:"absolute top-5 right-5 text-gray-500 hover:text-gray-700",children:e.jsx(C,{size:20})}),e.jsx("h2",{className:"text-xl font-bold mb-4 font-serif",children:"Testimonial"}),o&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex  pt-2",children:[e.jsx("p",{className:" mr-2 font-serif font-semibold",children:"Name :"}),e.jsx("p",{children:o.name})]}),e.jsxs("div",{className:"flex pt-2",children:[e.jsx("p",{className:"mr-2 font-serif font-semibold",children:"Designation :"}),e.jsx("p",{children:o.designation})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{children:e.jsx("p",{className:"mr-2 font-serif font-semibold",children:"Testimony :"})}),e.jsx(ne,{readOnly:!0,value:o.testimony,modules:{toolbar:!1},theme:"bubble",className:"quill"})]})]}),e.jsx("button",{onClick:m,className:"mt-4 px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 absolute",children:"Close"})]})})]})};export{ue as default};
