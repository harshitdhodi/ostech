import{r as a,E as Fe,s as Pe,b as c,j as e}from"./index-DYrfXb_W.js";import{R as $e}from"./quill.snow-Bpog9s7S.js";const Me=()=>{var G,J,Z,ee,te,se,ae,le,oe,re;const[h,S]=a.useState(""),[w,k]=a.useState(""),[b,F]=a.useState([]),[o,p]=a.useState(""),[P,$]=a.useState(""),[I,A]=a.useState(""),[M,_]=a.useState(""),[q,R]=a.useState(""),[D,E]=a.useState(""),[T,O]=a.useState(""),[L,U]=a.useState(""),[ce,f]=a.useState(),[z,X]=a.useState(),[H,K]=a.useState(),[Q,V]=a.useState(),[d,ie]=a.useState([]),[n,W]=a.useState(""),[u,j]=a.useState(""),[y,g]=a.useState(""),{slugs:N}=Fe(),[Y,B]=a.useState([]),[C,de]=a.useState([]),[m,x]=a.useState([]),ue=Pe(),me=async()=>{try{const s=await c.get("/api/services/getAll",{withCredentials:!0});ie(s.data)}catch(s){console.error(s)}},he={toolbar:[[{font:[]}],["bold","italic","underline","strike","blockquote"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],clipboard:{matchVisual:!1}};a.useEffect(()=>{be(),me()},[]);const be=async()=>{try{const t=(await c.get(`/api/services/singleService?slugs=${N}`,{withCredentials:!0})).data;S(t.title),k(t.details),B(t.photo),V(t.status),x(t.alt),p(t.slug),$(t.metatitle),A(t.metadescription),_(t.metakeywords),R(t.metalanguage),E(t.metacanonical),O(t.metaschema),U(t.otherMeta),t.url?f(t.url):f(`http://localhost:3000/service/${t.slug}`),X(t.changeFreq),K(t.priority);const r=(await c.get(`/api/services/getSpecificCategory?categoryId=${t.categories}`,{withCredentials:!0})).data;W(r._id);const v=(await c.get(`/api/services/getSpecificSubcategory?categoryId=${t.categories}&subCategoryId=${t.subcategories}`,{withCredentials:!0})).data;j(v._id);const ke=(await c.get(`/api/services/getSpecificSubSubcategory?categoryId=${t.categories}&subCategoryId=${t.subcategories}&subSubCategoryId=${t.subSubcategories}`,{withCredentials:!0})).data;g(ke._id)}catch(s){console.error(s)}},pe=async s=>{s.preventDefault();try{const t=new FormData;t.append("title",h),t.append("details",w),t.append("status",Q),t.append("slug",o),t.append("metatitle",P),t.append("metakeywords",M),t.append("metadescription",I),t.append("metalanguage",q),t.append("metacanonical",D),t.append("metaschema",T),t.append("otherMeta",L),t.append("url",ce),t.append("changeFreq",z),t.append("priority",H),t.append("categories",n),t.append("subcategories",u),t.append("subSubcategories",y);const l=[...m,...C];b.forEach(i=>{t.append("photo",i)}),l.forEach(i=>{t.append("alt",i)});const r=await c.put(`/api/services/updateService?slugs=${N}`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});ue("/services")}catch(t){console.error(t)}},ge=s=>{const t=Array.from(s.target.files);F([...b,...t])},xe=(s,t)=>{const l=[...m];l[t]=s.target.value,x(l)},ve=(s,t)=>{const l=[...C];l[t]=s.target.value,de(l)},fe=(s,t,l)=>{s.preventDefault(),c.delete(`/api/services/${N}/image/${t}/${l}`,{withCredentials:!0}).then(r=>{const i=Y.filter(ne=>ne!==t);B(i);const v=[...m];v.splice(l,1),x(v)}).catch(r=>{console.error(r)})},je=(s,t)=>{s.preventDefault();const l=[...b];l.splice(t,1),F(l);const r=[...m];r.splice(t,1),x(r)},ye=s=>e.jsx("option",{value:s._id,selected:n,children:s.category},s._id),Ne=s=>e.jsx("option",{value:s._id,selected:u,children:s.category},s._id),Ce=s=>e.jsx("option",{value:s._id,selected:y,children:s.category},s._id),Se=s=>{const t=s.target.value;W(t),j(""),g("")},we=s=>{const t=s.target.value;j(t),g("")};return a.useEffect(()=>{o&&f(`http://localhost:3000/services/${o}`)},[o]),a.useEffect(()=>{p(h)},[h]),a.useEffect(()=>{p(o.replace(/\s+/g,"-").toLowerCase())},[o]),e.jsxs("form",{onSubmit:pe,className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Service"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"parentCategory",className:"block font-semibold mb-2",children:"Parent Category"}),e.jsxs("select",{id:"parentCategory",value:n,onChange:Se,className:"w-full p-2 border rounded focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Parent Category"}),d.map(ye)]})]}),((J=(G=d.find(s=>s._id===n))==null?void 0:G.subCategories)==null?void 0:J.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"subCategory",className:"block font-semibold mb-2",children:"Subcategory"}),e.jsxs("select",{id:"subCategory",value:u,onChange:we,className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Subcategory"}),(ee=(Z=d.find(s=>s._id===n))==null?void 0:Z.subCategories)==null?void 0:ee.map(Ne)]})]}),((ae=(se=(te=d.find(s=>s._id===n))==null?void 0:te.subCategories.find(s=>s._id===u))==null?void 0:se.subSubCategory)==null?void 0:ae.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"subSubCategory",className:"block font-semibold mb-2",children:"Sub-Subcategory"}),e.jsxs("select",{id:"subSubCategory",value:y,onChange:s=>g(s.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Sub-Subcategory"}),(re=(oe=(le=d.find(s=>s._id===n))==null?void 0:le.subCategories.find(s=>s._id===u))==null?void 0:oe.subSubCategory)==null?void 0:re.map(Ce)]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:h,onChange:s=>S(s.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"details",className:"block font-semibold mb-2",children:"Description"}),e.jsx($e,{value:w,onChange:k,modules:he,className:"quill"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Current Photos"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:Y.map((s,t)=>e.jsxs("div",{className:"relative w-56",children:[e.jsx("img",{src:`/api/image/download/${s}`,alt:`Photo ${t+1}`,className:"w-56 h-32 object-cover"}),e.jsxs("label",{htmlFor:`alt-${t}`,className:"block mt-2",children:["Alternative Text:",e.jsx("input",{type:"text",id:`alt-${t}`,value:m[t],onChange:l=>xe(l,t),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsx("button",{onClick:l=>fe(l,s,t),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:e.jsx("span",{className:"text-xs",children:"X"})})]},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-semibold mb-2",children:"Add New Photos"}),e.jsx("input",{type:"file",onChange:ge,multiple:!0,accept:"image/*",className:"p-2 border rounded"}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:b.map((s,t)=>e.jsxs("div",{className:"relative w-56",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`New Photo ${t+1}`,className:"w-56 h-32 object-cover"}),e.jsxs("label",{htmlFor:`alt-new-${t}`,className:"block mt-2",children:["Alternative Text:",e.jsx("input",{type:"text",id:`alt-new-${t}`,value:C[t]||"",onChange:l=>ve(l,t),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsx("button",{onClick:l=>je(l,t),className:`absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex\r
                justify-center items-center`,children:e.jsx("span",{className:"text-xs",children:"X"})})]},t))})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"slug",className:"block font-semibold mb-2",children:"Slug"}),e.jsx("input",{type:"text",id:"slug",value:o,onChange:s=>p(s.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),e.jsx("input",{disabled:!0,type:"url",id:"url",value:`http://localhost:3000/service/${o}`,className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Title"}),e.jsx("textarea",{id:"meta",value:P,onChange:s=>$(s.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Description"}),e.jsx("textarea",{id:"meta",value:I,onChange:s=>A(s.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Keywords"}),e.jsx("textarea",{id:"meta",value:M,onChange:s=>_(s.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Canonical"}),e.jsx("textarea",{id:"meta",value:D,onChange:s=>E(s.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Language"}),e.jsx("textarea",{id:"meta",value:q,onChange:s=>R(s.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Other Meta"}),e.jsx("textarea",{id:"meta",value:L,onChange:s=>U(s.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Schema"}),e.jsx("textarea",{id:"meta",value:T,onChange:s=>O(s.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("input",{type:"number",id:"priority",min:0,max:1,step:.01,value:H,onChange:s=>K(s.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"changeFreq",className:"block font-semibold mb-2",children:"Change Frequency"}),e.jsxs("select",{id:"changeFreq",value:z,onChange:s=>X(s.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Change Frequency"}),e.jsx("option",{value:"always",children:"Always"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),e.jsxs("select",{id:"status",value:Q,onChange:s=>V(s.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-200",children:"Update Service"})]})};export{Me as default};
