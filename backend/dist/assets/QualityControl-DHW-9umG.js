import{r as a,s as B,j as e,L as g,x as D,y as E,b as r,z as F,C as m,D as L}from"./index-DaCCig_H.js";import{r as y,U as $,l as R}from"./index-DxZpshAk.js";import{Q as U,B as _}from"./ReactToastify-DyB85pLu.js";import"./clsx-B-dksMZM.js";const O=()=>{const[i,c]=a.useState(""),[d,u]=a.useState(""),[o,b]=a.useState([]),[f,p]=a.useState(!0),[l,j]=a.useState(""),x=B(),C=()=>{_.success("Updated Successfully!")},N=a.useMemo(()=>o.filter(t=>t.title.toLowerCase().includes(l.toLowerCase())),[o,l]),v=a.useMemo(()=>[{Header:"ID",accessor:"id"},{Header:"Title",accessor:"title",Cell:({row:t})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>x(`/qualitycontrol/editQualitycontrol/${t.original._id}`),children:t.original.title})},{Header:"Description",accessor:"description",Cell:({row:t})=>e.jsx("span",{className:"hover:text-blue-500 cursor-pointer",onClick:()=>x(`/qualitycontrol/editQualitycontrol/${t.original._id}`),children:t.original.description})},{Header:"Photo",accessor:"photo",Cell:({value:t})=>{const s=Array.isArray(t)&&t.length>0?t[0]:null;return s?e.jsx("img",{src:`/api/qualitycontrol/download/${s}`,alt:"qualitycontrol",className:"w-32 object-cover h-20"}):null},disableSortBy:!0},{Header:"Options",Cell:({row:t})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 transition",children:e.jsx(g,{to:`/qualitycontrol/editQualitycontrol/${t.original._id}`,children:e.jsx(D,{})})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>T(t.original._id),children:e.jsx(E,{})})]}),disableSortBy:!0}],[]),{getTableProps:w,getTableBodyProps:S,headerGroups:H,rows:q,prepareRow:Q}=y.useTable({columns:v,data:N},y.useSortBy),h=async()=>{p(!0);try{const s=(await r.get("/api/qualitycontrol/getQualityControls",{withCredentials:!0})).data.map((n,A)=>({...n,id:A+1}));b(s)}catch(t){console.error(t)}finally{p(!1)}},T=async t=>{try{const s=await r.delete(`/api/qualitycontrol/deleteQualityControl?id=${t}`,{withCredentials:!0});h()}catch(s){console.error(s)}};a.useEffect(()=>{h()},[]);const P=async()=>{try{const t=await r.get("/api/pageHeading/heading?pageType=qualityControl",{withCredentials:!0}),{heading:s,subheading:n}=t.data;c(s||""),u(n||"")}catch(t){console.error(t)}},k=async()=>{try{await r.put("/api/pageHeading/updateHeading?pageType=qualityControl",{pagetype:"qualityControl",heading:i,subheading:d},{withCredentials:!0}),C()}catch(t){console.error(t)}};return a.useEffect(()=>{P()},[]),e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsx(U,{}),e.jsxs("div",{className:"mb-8 border border-gray-200 shadow-lg p-4 rounded ",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 uppercase font-serif",children:"Heading"}),e.jsx("input",{type:"text",value:i,onChange:t=>c(t.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 font-serif uppercase",children:"Description"}),e.jsx("textarea",{type:"text",value:d,onChange:t=>u(t.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})]})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:"Save"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase",children:"Quality Controls"}),e.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-900 transition duration-300 font-serif",children:e.jsx(g,{to:"/qualitycontrol/createQualitycontrol",children:e.jsx(F,{size:15})})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by title...",value:l,onChange:t=>j(t.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:border-blue-500 transition duration-300"})}),e.jsx("h2",{className:"text-md font-semibold mb-4",children:"Manage Quality Controls"}),f?e.jsx("div",{className:"flex justify-center",children:e.jsx($,{animation:R,size:56})}):e.jsx(e.Fragment,{children:o.length==0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("iframe",{className:"w-96 h-96",src:"https://lottie.host/embed/1ce6d411-765d-4361-93ca-55d98fefb13b/AonqR3e5vB.json"})}):e.jsxs("table",{className:"w-full mt-4 border-collapse overflow-x-auto",...w(),children:[e.jsx("thead",{className:"bg-slate-700 hover:bg-slate-800 text-white",children:H.map(t=>e.jsx("tr",{...t.getHeaderGroupProps(),children:t.headers.map(s=>e.jsx("th",{...s.getHeaderProps(s.getSortByToggleProps()),className:"py-2 px-4 border-b border-gray-300 cursor-pointer uppercase font-serif",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.render("Header")}),s.canSort&&e.jsx("span",{className:"ml-1",children:s.isSorted?s.isSortedDesc?e.jsx(m,{}):e.jsx(L,{}):e.jsx(m,{className:"text-gray-400"})})]})}))}))}),e.jsx("tbody",{...S(),children:q.map(t=>(Q(t),e.jsx("tr",{...t.getRowProps(),className:"border-b border-gray-300 hover:bg-gray-100 transition duration-150",children:t.cells.map(s=>e.jsx("td",{...s.getCellProps(),className:"py-2 px-4",children:s.render("Cell")}))})))})]})})]})};export{O as default};
