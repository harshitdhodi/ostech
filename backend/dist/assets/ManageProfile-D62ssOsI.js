import{r as o,j as e,b as h}from"./index-DaCCig_H.js";import{Q as g,B as j}from"./ReactToastify-DyB85pLu.js";import"./clsx-B-dksMZM.js";function v(){const[s,r]=o.useState({firstname:"",lastname:"",email:"",photo:""}),[d,x]=o.useState(null),[c,m]=o.useState(""),[p,l]=o.useState(!1),[a,u]=o.useState({});o.useEffect(()=>{(async()=>{try{const t=await h.get("/api/admin/adminprofile",{withCredentials:!0});r(t.data.admin),m(`/api/logo/download/${t.data.admin.photo}`)}catch(t){console.error("Error fetching admin profile:",t)}})()},[]);const i=n=>{r({...s,[n.target.name]:n.target.value})},f=n=>{const t=n.target.files[0];x(t),m(URL.createObjectURL(t))},b=async n=>{n.preventDefault(),l(!0),u({});try{const t=new FormData;t.append("email",s.email),t.append("firstname",s.firstname),t.append("lastname",s.lastname),d&&t.append("photo",d),await h.put("/api/admin/updateAdminprofile",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),l(!1),j.success("Profile updated successfully")}catch(t){l(!1),console.error("Error updating profile:",t),u(t.response.data.errors||{}),alert("Failed to update profile. Please check your inputs.")}};return e.jsxs("div",{className:"w-full md:w-1/3 p-5",children:[e.jsx(g,{}),e.jsx("h2",{className:"text-2xl font-semibold font-serif text-center mb-5",children:"Edit Profile"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"First Name"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"firstname",value:s.firstname,onChange:i}),a.firstname&&e.jsx("p",{className:"text-red-500 text-xs italic",children:a.firstname})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Name"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"lastname",value:s.lastname,onChange:i}),a.lastname&&e.jsx("p",{className:"text-red-500 text-xs italic",children:a.lastname})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",name:"email",value:s.email,onChange:i}),a.email&&e.jsx("p",{className:"text-red-500 text-xs italic",children:a.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Photo"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"file",name:"photo",onChange:f}),a.photo&&e.jsx("p",{className:"text-red-500 text-xs italic",children:a.photo})]}),c&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:c,alt:"Photo Preview",className:"w-32 h-32 object-cover rounded"})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",disabled:p,children:p?"Updating...":"Update Profile"})})]})]})}export{v as default};
