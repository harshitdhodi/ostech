import{r as n,E as q,s as O,b as g,j as t}from"./index-Vu9aRgsR.js";const B=()=>{const[N,f]=n.useState(""),[c,x]=n.useState([]),[j,v]=n.useState(""),[w,P]=n.useState("active"),{id:d}=q(),[C,y]=n.useState([]),[i,A]=n.useState([]),[r,h]=n.useState([]),[u,p]=n.useState([]),[b,I]=n.useState([]),S=O();n.useEffect(()=>{T()},[]);const T=async()=>{try{const a=await g.get(`/api/partner/singlePartner?id=${d}`,{withCredentials:!0}),{partnerName:e,photo:s,url:o,alt:l,imgtitle:m,status:$}=a.data;f(e),y(s),v(o),P($),h(l),p(m)}catch(a){console.error(a)}},k=(a,e,s)=>{a.preventDefault(),g.delete(`/api/partner/${d}/image/${e}/${s}`,{withCredentials:!0}).then(()=>{const o=C.filter(($,X)=>X!==s);y(o);const l=[...r];l.splice(s,1),h(l);const m=[...u];m.splice(s,1),p(m)}).catch(o=>{console.error(o)})},F=a=>{const e=Array.from(a.target.files);x([...c,...e])},E=(a,e)=>{const s=[...r];s[e]=a.target.value,h(s)},D=(a,e)=>{const s=[...b];s[e]=a.target.value,I(s)},U=(a,e)=>{const s=[...i];s[e]=a.target.value,A(s)},R=(a,e)=>{const s=[...u];s[e]=a.target.value,p(s)},L=(a,e)=>{a.preventDefault();const s=[...c];s.splice(e,1),x(s);const o=[...i];o.splice(e,1),A(o);const l=[...photoTitles];l.splice(e,1),setPhotoTitles(l)},z=async a=>{a.preventDefault();try{const e=new FormData;e.append("partnerName",N);const s=[...r,...i],o=[...u,...b];c.forEach(l=>e.append("photo",l)),s.forEach(l=>e.append("alt",l)),o.forEach(l=>e.append("imgtitle",l)),e.append("url",j),e.append("status",w),await g.put(`/api/partner/updatePartner?id=${d}`,e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),S("/clients")}catch(e){console.error(e)}};return t.jsxs("form",{onSubmit:z,className:"p-4",children:[t.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Client"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"partnerName",className:"block font-semibold mb-2",children:"Client Name"}),t.jsx("input",{type:"text",id:"partnerName",value:N,onChange:a=>f(a.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Current Photos"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:C.map((a,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:`/api/image/download/${a}`,alt:r[e]||`Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-${e}`,value:r[e]||"",onChange:s=>E(s,e),className:"w-56 p-2 border rounded focus:outline-none"})]}),t.jsxs("label",{htmlFor:`imgtitle-${e}`,className:"block mt-2",children:["Title Text:",t.jsx("input",{type:"text",id:`imgtitle-${e}`,value:u[e]||"",onChange:s=>R(s,e),className:"w-56 p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:s=>k(s,a,e),className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex justify-center items-center",children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block font-semibold mb-2",children:"Add New Photos"}),t.jsx("input",{type:"file",onChange:F,multiple:!0,accept:"image/*",className:"p-2 border rounded"}),t.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:c.map((a,e)=>t.jsxs("div",{className:"relative w-56",children:[t.jsx("img",{src:URL.createObjectURL(a),alt:`New Photo ${e+1}`,className:"w-56 h-32 object-cover"}),t.jsxs("label",{htmlFor:`alt-new-${e}`,className:"block mt-2",children:["Alternative Text:",t.jsx("input",{type:"text",id:`alt-new-${e}`,value:i[e]||"",onChange:s=>U(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsxs("label",{htmlFor:`imgtitle-new-${e}`,className:"block mt-2",children:["Title Text:",t.jsx("input",{type:"text",id:`imgtitle-new-${e}`,value:b[e]||"",onChange:s=>D(s,e),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsx("button",{onClick:s=>L(s,e),className:`absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex\r
                justify-center items-center`,children:t.jsx("span",{className:"text-xs",children:"X"})})]},e))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),t.jsx("input",{type:"url",id:"url",value:j,onChange:a=>v(a.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),t.jsxs("select",{id:"status",value:w,onChange:a=>P(a.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})]}),t.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Update Partner"})]})};export{B as default};
