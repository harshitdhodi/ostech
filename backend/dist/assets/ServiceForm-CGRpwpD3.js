import{E as y,s as w,a3 as S,a4 as T,a5 as q,r as g,j as e}from"./index-DYrfXb_W.js";import{u as F}from"./index.esm-BcspotP5.js";const L=()=>{const{id:r}=y(),x=w(),{data:s,isLoading:b,error:c}=S(r,{skip:!r,refetchOnMountOrArgChange:!0}),{register:l,handleSubmit:h,setValue:d,formState:{errors:i}}=F(),[N,{isLoading:o}]=T(),[f,{isLoading:m}]=q(),[n,u]=g.useState(null);g.useEffect(()=>{if(s!=null&&s.data){const t=s.data;d("title",t.title),d("description",t.description),d("imgTitle",t.imgTitle),d("altName",t.altName),t.photo&&u(`/api/image/download/${t.photo}`)}},[s,d]);const j=async t=>{var p;const a=new FormData;a.append("title",t.title),a.append("description",t.description),a.append("imgTitle",t.imgTitle),a.append("altName",t.altName),(p=t.photo)!=null&&p[0]&&a.append("photo",t.photo[0]);try{r?await f({id:r,formData:a}).unwrap():await N(a).unwrap(),x("/capability-service-table")}catch(v){console.error("Submission failed:",v)}};return b?e.jsx("div",{children:"Loading service..."}):c?e.jsxs("div",{children:["Error loading service: ",c.message]}):e.jsxs("div",{className:"p-6  mx-auto bg-white border rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:r?"Edit Service":"Add New Service"}),e.jsxs("form",{onSubmit:h(j),encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",...l("title",{required:"Title is required"}),className:"w-full p-2 border border-gray-300 rounded-lg"}),i.title&&e.jsx("p",{className:"text-red-500 text-sm",children:i.title.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 font-medium mb-2",children:"Description"}),e.jsx("textarea",{id:"description",...l("description",{required:"Description is required"}),className:"w-full p-2 border border-gray-300 rounded-lg",rows:"4"}),i.description&&e.jsx("p",{className:"text-red-500 text-sm",children:i.description.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"photo",className:"block text-gray-700 font-medium mb-2",children:"Photo"}),e.jsx("input",{type:"file",id:"photo",...l("photo"),className:"w-full p-2 border border-gray-300 rounded-lg",onChange:t=>{t.target.files[0]&&u(URL.createObjectURL(t.target.files[0]))}}),n&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:n,alt:"Preview",className:"w-1/4 h-auto rounded-lg"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imgTitle",className:"block text-gray-700 font-medium mb-2",children:"Image Title"}),e.jsx("input",{type:"text",id:"imgTitle",...l("imgTitle",{required:"Image Title is required"}),className:"w-full p-2 border border-gray-300 rounded-lg"}),i.imgTitle&&e.jsx("p",{className:"text-red-500 text-sm",children:i.imgTitle.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"altName",className:"block text-gray-700 font-medium mb-2",children:"Alt Name"}),e.jsx("input",{type:"text",id:"altName",...l("altName",{required:"Alt Name is required"}),className:"w-full p-2 border border-gray-300 rounded-lg"}),i.altName&&e.jsx("p",{className:"text-red-500 text-sm",children:i.altName.message})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{type:"submit",className:`w-full p-2 rounded-lg text-white ${o||m?"bg-gray-400":"bg-blue-500"}`,disabled:o||m,children:o||m?"Submitting...":r?"Update Service":"Add Service"})})]})]})};export{L as default};
